- @body_id = 'event-show'
- @title << "#{@event.name}"

.tabbable
  %ul.nav.nav-tabs
    %li.active
      %a{href: "#tab1", data: {toggle: "tab"}} Description
    %li
      %a{href: "#tab2", data: {toggle: "tab"}} Rules
    %li
      %a{href: "#tab3", data: {toggle: "tab"}} Players
    %li.pull-right
      .escape-style
        - if can? :manage, :events
          = link_to "Edit Event", edit_event_path(@event), class: "btn btn-primary"
        - elsif current_user.nil?
          = link_to "Sign up to join this event!", signup_path, class: "btn btn-primary"
        - elsif current_user
          - reg = current_user.registrations.active.where(event_id: @event.id).first
          - if reg
            = link_to 'Quit', event_registration_quit_path(@event, reg), class: 'btn btn-danger btn-mini',
              method: :delete, confirm: 'Are you sure you want to quit the league?'
          - else
            = link_to 'Join!', join_event_path(@event), class: 'btn btn-primary btn-mini',
              method: :post

  .tab-content
    #tab1.tab-pane.active
      %p
        - if @event.description
          = markdown_to_html(@event.description)
        - else
          This event has no description.
    #tab2.tab-pane
      %table.table.table-condensed.table-bordered.table-hover
        - @ruleset.attributes.each do |k,v|
          %tr
            - next if @excepted_columns.include?(k.to_sym)
            - next if v.nil?
            %th= k
            %td= v
    #tab3.tab-pane
      %ul
        - @event.registrations.each do |reg|
          %li= reg.handle

